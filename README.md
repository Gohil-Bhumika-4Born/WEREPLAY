# WeReply Backend

A Flask-based web application with MVC architecture for managing AI training, chat reports, documents, and user profiles.

## Project Structure

```
wereply-backend/
│
├── run.py                     # App entry point
├── requirements.txt           # Python dependencies
├── .flaskenv                  # FLASK_APP, FLASK_ENV (can be committed)
├── .env                       # Secrets (NOT committed; ignored)
├── README.md                  # This documentation
├── .gitignore                 # Git ignores
│
├── app/
│   ├── __init__.py            # Application factory + blueprint registration
│   ├── config.py              # Config classes (Development/Production)
│   ├── extensions.py          # db, migrate, login_manager singletons
│   │
│   ├── routes/                # Thin blueprints (URLs only)
│   │   ├── auth_routes.py     # /login, /register, /logout
│   │   └── main_routes.py     # /dashboard, /profile, etc.
│   │
│   ├── controllers/           # Page/view orchestration
│   │   ├── auth_controller.py
│   │   └── main_controller.py
│   │
│   ├── services/              # Business logic & DB operations
│   │   └── auth_service.py
│   │
│   ├── models/                # SQLAlchemy models
│   │   └── user.py            # User(id, username, email, password_hash)
│   │
│   ├── templates/             # Jinja2 templates
│   │   ├── auth/
│   │   │   ├── login.html
│   │   │   └── register.html
│   │   └── main/
│   │       ├── dashboard.html
│   │       └── ...
│   │
│   └── static/
│       ├── css/
│       ├── js/
│       └── Images/
│
└── migrations/                # Alembic migration scripts (autogenerated)
```

## Setup Instructions

### 1. Create Virtual Environment

```bash
python -m venv venv
```

### 2. Activate Virtual Environment

**Windows:**
```bash
venv\Scripts\activate
```

**macOS/Linux:**
```bash
source venv/bin/activate
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

### 4. Configure Environment Variables

Copy `.env` and update with your settings:
- `SECRET_KEY`: Change to a secure random key in production
- `DATABASE_URL`: Database connection string

### 5. Initialize Database (Optional - for future use)

```bash
flask db init
flask db migrate -m "Initial migration"
flask db upgrade
```

### 6. Run the Application

**Option 1: Using Flask CLI**
```bash
flask run
```

**Option 2: Using Python**
```bash
python run.py
```

The application will be available at `http://127.0.0.1:5000`

## Default Credentials

- **Email:** admin@wereplay.com
- **Password:** admin123

## Architecture

### Application Factory Pattern
The app uses the factory pattern (`create_app()`) for flexible configuration and testing.

### Blueprints
- **auth_routes**: Authentication-related routes (login, register, logout, password reset)
- **main_routes**: Main application routes (dashboard, profile, documents, etc.)

### Layers
- **Routes**: Define URL patterns and map to controllers
- **Controllers**: Handle request/response, call services, render templates
- **Services**: Contain business logic and database operations
- **Models**: Define database schema using SQLAlchemy ORM

## Development

### Adding New Routes

1. Create controller function in appropriate controller file
2. Add route in appropriate blueprint file
3. Create template in templates directory
4. Update service layer if business logic is needed

### Database Migrations

After modifying models:
```bash
flask db migrate -m "Description of changes"
flask db upgrade
```

## Production Deployment

1. Set `FLASK_ENV=production` in `.flaskenv`
2. Use a production WSGI server (gunicorn, uWSGI)
3. Set a strong `SECRET_KEY`
4. Use a production database (PostgreSQL, MySQL)
5. Configure proper logging
6. Enable HTTPS

## License

Proprietary - All rights reserved
