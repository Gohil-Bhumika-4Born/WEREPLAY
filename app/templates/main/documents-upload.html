<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="WeReplay Admin Panel - Upload Documents for AI Training">
    <meta name="keywords" content="WeReplay, Document Upload, AI Training, Documents">
    <meta name="author" content="WeReplay">
    <meta name="theme-color" content="#18CB96">
    
    <title>WeReplay Admin Panel - Upload Documents</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='Images/WeReplay-favicon.svg') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='Images/WeReplay-favicon.svg') }}">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Configuration -->
    <script src="{{ url_for('static', filename='js/tailwind-config.js') }}"></script>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body class="bg-gray-50 dark:bg-[#1E1E1E] font-sans antialiased min-h-screen">
    <!-- Dashboard Container -->
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="hidden lg:flex lg:flex-shrink-0 lg:w-20 xl:w-64 lg:flex-col bg-gradient-to-b from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] transition-all duration-300 shadow-md">
            <div class="flex flex-col h-full">
                <!-- Logo Section -->
                <div class="flex items-center justify-between px-6 py-8">
                    <div class="flex items-center gap-2">
                        <img src="{{ url_for('static', filename='Images/We-Replay-Logo.svg') }}" alt="WeReplay Logo" class="h-8 w-auto dark:hidden" width="31" height="25">
                        <img src="{{ url_for('static', filename='Images/WeReplay-Logo-WhiteText.svg') }}" alt="WeReplay Logo" class="h-8 w-auto hidden dark:block" width="165" height="40">
                    </div>
                </div>
                
                <!-- Navigation -->
                <nav class="flex-1 px-4 py-4 space-y-2 overflow-y-auto rounded-b-2xl">
                    <p class="px-3 text-xs font-bold text-gray-900 dark:text-white uppercase tracking-wider mb-4 hidden xl:block">NAVIGATION</p>
                    
                    <a href="{{ url_for('main.dashboard') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="Dashboard">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Dashboard</span>
                    </a>
                    
                    <a href="{{ url_for('main.chat_reports') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="Chat Report">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Chat Report</span>
                    </a>
                    
                    <a href="{{ url_for('main.ai_training') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="AI Training">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">AI Training</span>
                    </a>
                    
                    <a href="{{ url_for('main.documents_upload') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg bg-primary hover:bg-primaryDark dark:bg-[#18CB96] text-white transition-all shadow-sm hover:bg-[#14a87a] dark:hover:bg-[#14a87a]" aria-current="page" aria-label="Documents Upload - Current page">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Documents Upload</span>
                    </a>
                    
                    <a href="{{ url_for('main.documents') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="Documents List View">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Documents List View</span>
                    </a>
                    
                    <a href="{{ url_for('main.training_history') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="Training History">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Training History</span>
                    </a>
                    
                    <a href="{{ url_for('main.guidelines') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="Guidelines">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Guidelines</span>
                    </a>
                    
                    <a href="{{ url_for('main.plans_billing') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="Plans & Billing">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Plans & Billing</span>
                    </a>
                    
                    <a href="{{ url_for('main.support') }}" class="flex items-center justify-center xl:justify-start gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] hover:bg-primary/5 dark:hover:bg-[#333333] group" aria-label="Support">
                        <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <span class="font-medium text-sm hidden xl:inline">Support</span>
                    </a>
                </nav>
            </div>
        </aside>
        
        <!-- Mobile Sidebar Overlay -->
        <div id="mobileSidebar" class="fixed inset-0 z-40 lg:hidden hidden rounded-b-2xl">
            <div class="fixed inset-0 bg-gray-600 bg-opacity-75 transition-opacity" onclick="toggleMobileSidebar()"></div>
            <div class="relative flex flex-col w-64 h-full bg-white dark:bg-[#252525] shadow-xl">
                <div class="flex flex-col h-full">
                    <div class="px-6 py-4">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center gap-2">
                                <img src="{{ url_for('static', filename='Images/We-Replay-Logo.svg') }}" alt="WeReplay Logo" class="h-8 w-auto dark:hidden" width="31" height="25">
                                <img src="{{ url_for('static', filename='Images/WeReplay-Logo-WhiteText.svg') }}" alt="WeReplay Logo" class="h-8 w-auto hidden dark:block" width="165" height="40">
                            </div>
                            <button onclick="toggleMobileSidebar()" class="rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-[#333333]" aria-label="Close menu">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                    <nav class="flex-1 px-4 py-4 space-y-2 overflow-y-auto">
                        <p class="px-3 text-xs font-bold text-gray-900 dark:text-white uppercase tracking-wider mb-4">NAVIGATION</p>
                        <a href="{{ url_for('main.dashboard') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                            </svg>
                            <span class="font-medium text-sm">Dashboard</span>
                        </a>
                        <a href="{{ url_for('main.chat_reports') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <span class="font-medium text-sm">Chat Report</span>
                        </a>
                        <a href="{{ url_for('main.ai_training') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                            </svg>
                            <span class="font-medium text-sm">AI Training</span>
                        </a>
                        <a href="{{ url_for('main.documents_upload') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary hover:bg-primaryDark dark:bg-[#18CB96] text-white transition-all shadow-sm hover:bg-[#14a87a] dark:hover:bg-[#14a87a]">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                            <span class="font-medium text-sm">Documents Upload</span>
                        </a>
                        <a href="{{ url_for('main.documents') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <span class="font-medium text-sm">Documents List View</span>
                        </a>
                        <a href="{{ url_for('main.training_history') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <span class="font-medium text-sm">Training History</span>
                        </a>
                        <a href="{{ url_for('main.guidelines') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                            <span class="font-medium text-sm">Guidelines</span>
                        </a>
                        <a href="{{ url_for('main.plans_billing') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"></path>
                            </svg>
                            <span class="font-medium text-sm">Plans & Billing</span>
                        </a>
                        <a href="{{ url_for('main.support') }}" onclick="toggleMobileSidebar()" class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-900 dark:text-white transition-colors hover:text-[#30B566] dark:hover:text-[#30B566] group">
                            <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                            <span class="font-medium text-sm">Support</span>
                        </a>
                    </nav>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-gradient-to-br from-white via-secondary/20 to-primary/5 dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E]">
            <!-- Header -->
            <header class="sticky top-0 z-30 bg-white/95 dark:bg-[#252525]/95 backdrop-blur shadow-sm rounded-b-2xl">
                <div class="flex items-center justify-between px-4 sm:px-6 lg:px-8 py-2.5 sm:py-3">
                    <div class="flex items-center gap-4">
                        <button class="lg:hidden p-2 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-[#333333] transition-colors" onclick="toggleMobileSidebar()" aria-label="Open menu">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                            </svg>
                        </button>
                        <div class="flex items-center gap-2">
                            <svg class="w-6 h-6 text-primaryDark dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                            <h1 class="text-lg sm:text-xl font-bold text-primaryDark dark:text-white">Upload Documents</h1>
                        </div>
                    </div>
                    
                    <!-- Right Side Actions -->
                    <div class="flex items-center gap-3">
                        <!-- Theme Toggle -->
                        <button id="themeToggleNavbar" class="flex items-center justify-center p-2 rounded-full hover:bg-gray-100 dark:hover:bg-[#333333] transition-all focus:outline-none" aria-label="Toggle theme">
                            <svg id="sunIconNavbar" class="w-5 h-5 text-gray-600 dark:text-white hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                            </svg>
                            <svg id="moonIconNavbar" class="w-5 h-5 text-gray-600 dark:text-white block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                            </svg>
                        </button>
                        
                        <!-- Notification Icon -->
                        <a href="{{ url_for('main.notifications') }}" class="relative flex items-center justify-center p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-all focus:outline-none" aria-label="Notifications">
                            <svg class="w-5 h-5 text-gray-600 dark:text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                            </svg>
                            <span class="absolute top-1 right-1 h-2 w-2 bg-red-500 rounded-full border-2 border-white dark:border-[#2A2A2A]"></span>
                        </a>
                        
                        <!-- Profile Dropdown -->
                        <div class="relative">
                            <button id="profileDropdownBtn" class="flex items-center justify-center p-2 rounded-full hover:bg-gray-100 dark:hover:bg-[#333333] transition-all focus:outline-none" aria-label="Profile menu" aria-expanded="false" aria-haspopup="true">
                                <div class="h-10 w-10 rounded-full bg-[#18CB96] flex items-center justify-center text-white font-semibold shadow-md hover:shadow-lg transition-shadow cursor-pointer">
                                    JD
                                </div>
                            </button>
                        
                            <!-- Dropdown Menu -->
                            <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-64 bg-white dark:bg-[#2A2A2A] rounded-xl shadow-2xl py-2 z-50">
                                <!-- User Info -->
                                <div class="px-4 py-3 bg-gray-50/50 dark:bg-[#2A2A2A]">
                                    <div class="flex items-center gap-3">
                                        <div class="h-10 w-10 rounded-full bg-[#18CB96] flex items-center justify-center text-white font-semibold shadow-sm">
                                            JD
                                        </div>
                                        <div class="flex-1 min-w-0">
                                            <p class="text-sm font-semibold text-gray-900 dark:text-white truncate">John Doe</p>
                                            <p class="text-xs text-gray-500 dark:text-white truncate">john@example.com</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Dropdown Items -->
                                <div class="py-2">
                                    <a href="{{ url_for('main.profile') }}" class="w-full flex items-center gap-3 px-4 py-2.5 text-left text-gray-700 dark:text-white hover:text-[#30B566] dark:hover:text-[#30B566] transition-colors rounded-lg mx-1 group" onclick="closeProfileDropdown()">
                                        <svg class="w-5 h-5 group-hover:text-[#30B566] dark:group-hover:text-[#30B566] transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                                        </svg>
                                        <span class="text-sm font-medium">Profile</span>
                                    </a>
                                    <button class="w-full flex items-center gap-3 px-4 py-2.5 text-left text-gray-700 dark:text-white hover:text-[#30B566] dark:hover:text-[#30B566] transition-colors rounded-lg mx-1 group" aria-label="Logout" onclick="openLogoutModal()">
                                        <svg class="w-5 h-5 group-hover:text-[#30B566] dark:group-hover:text-[#30B566] transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                                        </svg>
                                        <span class="text-sm font-medium">Logout</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Document Upload Content - ChatGPT Style Two Panel Layout -->
            <div class="flex h-[calc(100vh-64px)]">
                <!-- Left Panel - Upload & Configuration -->
                <div class="flex-1 overflow-y-auto">
                    <div class="p-4 sm:p-6 lg:p-8 max-w-4xl mx-auto">
                        <!-- Accepted Formats Info -->
                        <div class="mb-6 p-4 bg-gradient-to-br from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] rounded-xl border border-primary/20 dark:border-primary/30 shadow-sm">
                            <p class="text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wide mb-2">Accepted Formats</p>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 bg-white dark:bg-[#2A2A2A] rounded-lg text-xs font-semibold text-gray-700 dark:text-gray-300 border border-primary/20">PDF</span>
                                <span class="px-3 py-1 bg-white dark:bg-[#2A2A2A] rounded-lg text-xs font-semibold text-gray-700 dark:text-gray-300 border border-primary/20">DOCX</span>
                                <span class="px-3 py-1 bg-white dark:bg-[#2A2A2A] rounded-lg text-xs font-semibold text-gray-700 dark:text-gray-300 border border-primary/20">TXT</span>
                                <span class="px-3 py-1 bg-white dark:bg-[#2A2A2A] rounded-lg text-xs font-semibold text-gray-700 dark:text-gray-300 border border-primary/20">CSV</span>
                                <span class="px-3 py-1 bg-white dark:bg-[#2A2A2A] rounded-lg text-xs font-semibold text-gray-700 dark:text-gray-300 border border-primary/20">JSON</span>
                                <span class="px-3 py-1 bg-white dark:bg-[#2A2A2A] rounded-lg text-xs font-semibold text-gray-700 dark:text-gray-300 border border-primary/20">Postman JSON</span>
                            </div>
                        </div>

                        <!-- Drag & Drop Upload Area -->
                        <div id="dropZone" class="relative mb-6 p-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-2xl bg-gradient-to-br from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] hover:border-[#18CB96] dark:hover:border-[#18CB96] transition-all cursor-pointer group">
                            <input type="file" id="fileInput" multiple accept=".pdf,.docx,.txt,.csv,.json" class="hidden">
                            <div class="text-center">
                                <div class="mx-auto w-16 h-16 mb-4 rounded-full bg-[#18CB96]/10 dark:bg-[#18CB96]/20 flex items-center justify-center group-hover:bg-[#18CB96]/20 dark:group-hover:bg-[#18CB96]/30 transition-all">
                                    <svg class="w-8 h-8 text-[#18CB96]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                </div>
                                <p class="text-lg font-semibold text-gray-900 dark:text-white mb-2">Drag & drop files here</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">or <span class="text-[#18CB96] font-medium">browse</span> to upload</p>
                                <p class="text-xs text-gray-500 dark:text-gray-500">Multiple files supported</p>
                            </div>
                        </div>

                        <!-- Uploaded Files List -->
                        <div id="uploadedFiles" class="space-y-3 mb-6"></div>

                        <!-- Document Fields Section -->
                        <div id="documentFields" class="hidden relative overflow-hidden bg-white/90 dark:bg-[#252525] rounded-2xl sm:rounded-3xl shadow-lg shadow-primary/10 dark:shadow-black/40 border border-primary/15 dark:border-primary/25 p-6 mb-6">
                            <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(24,203,150,0.12),_transparent_55%)] pointer-events-none opacity-90"></div>
                            <div class="relative z-10">
                                <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Document Information</h3>
                                
                                <div class="space-y-4">
                                    <!-- Document Title -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Document Title</label>
                                        <input type="text" id="docTitle" class="w-full px-4 py-2.5 bg-white dark:bg-[#1E1E1E] border-[1.5px] border-gray-300 dark:border-gray-500 rounded-xl text-gray-900 dark:text-white focus:border-gray-400 dark:focus:border-gray-400 focus:ring-0 focus:outline-none transition-all" placeholder="Enter document title">
                                    </div>
                                    
                                    <!-- Category -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Category</label>
                                        <select id="docCategory" class="w-full px-4 py-2.5 bg-white dark:bg-[#1E1E1E] border-[1.5px] border-gray-300 dark:border-gray-500 rounded-xl text-gray-900 dark:text-white focus:border-gray-400 dark:focus:border-gray-400 focus:ring-0 focus:outline-none transition-all appearance-none cursor-pointer">
                                            <option value="">Select category</option>
                                            <option value="faq">FAQ</option>
                                            <option value="product">Product</option>
                                            <option value="api">API</option>
                                            <option value="policy">Policy</option>
                                            <option value="manual">Manual</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Description -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Description</label>
                                        <textarea id="docDescription" rows="3" class="w-full px-4 py-2.5 bg-white dark:bg-[#1E1E1E] border-[1.5px] border-gray-300 dark:border-gray-500 rounded-xl text-gray-900 dark:text-white focus:border-gray-400 dark:focus:border-gray-400 focus:ring-0 focus:outline-none transition-all resize-none" placeholder="Short explanation of the document"></textarea>
                                    </div>
                                    
                                    <!-- Tags -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Tags</label>
                                        <input type="text" id="docTags" class="w-full px-4 py-2.5 bg-white dark:bg-[#1E1E1E] border-[1.5px] border-gray-300 dark:border-gray-500 rounded-xl text-gray-900 dark:text-white focus:border-gray-400 dark:focus:border-gray-400 focus:ring-0 focus:outline-none transition-all" placeholder="e.g., refund, pricing, support (comma separated)">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Process Button -->
                        <button id="processBtn" onclick="processDocuments()" class="hidden w-full px-6 py-3.5 bg-[#18CB96] hover:bg-primaryDark/90 dark:bg-[#18CB96] dark:hover:bg-primaryDark/90 text-white rounded-xl font-semibold shadow-md hover:shadow-lg hover:shadow-[#18CB96]/30 transition-all duration-300 ease-out hover:scale-[1.02] hover:-translate-y-0.5">
                            Process Document
                        </button>
                    </div>
                </div>
                
                <!-- Right Panel - Preview (ChatGPT Style) -->
                <div class="hidden lg:block w-96">
                    <div class="relative overflow-hidden bg-white/90 dark:bg-[#252525] rounded-2xl sm:rounded-3xl shadow-lg shadow-primary/10 dark:shadow-black/40 border border-primary/15 dark:border-primary/25 p-6 sticky top-24">
                        <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(24,203,150,0.12),_transparent_55%)] pointer-events-none opacity-90"></div>
                        <div class="relative z-10">
                            <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-4">Document Preview</h3>
                            
                            <div id="previewContent" class="space-y-4">
                                <!-- Empty State - Modern Design -->
                                <div class="flex flex-col items-center justify-center min-h-[50vh] text-center">
                                    <div class="mb-6">
                                        <div class="mx-auto w-24 h-24 mb-4 rounded-2xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#2A2A2A] dark:to-[#333333] flex items-center justify-center shadow-inner">
                                            <svg class="w-12 h-12 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                            </svg>
                                        </div>
                                    </div>
                                    <p class="text-base font-medium text-gray-600 dark:text-gray-400">Upload a document to see preview</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Logout Modal -->
    <div id="logoutModal" class="hidden fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity" onclick="closeLogoutModal()"></div>
        <div class="flex min-h-full items-center justify-center p-4">
            <div class="relative bg-gradient-to-b from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all ring-[#18CB96]/20 dark:ring-[#18CB96]/30">
                <button onclick="closeLogoutModal()" class="absolute top-4 right-4 rounded-lg text-gray-400 dark:text-white hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#333333] transition-colors" aria-label="Close modal">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <div class="text-center">
                    <div class="mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 dark:bg-red-900/30 mb-4">
                        <svg class="h-8 w-8 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                        </svg>
                    </div>
                    <h3 id="modal-title" class="text-xl font-bold text-gray-900 dark:text-white mb-2">Logout Confirmation</h3>
                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-6">Are you sure you want to logout? You'll need to sign in again to access your account.</p>
                    <div class="flex flex-col sm:flex-row gap-3 sm:justify-center">
                        <button onclick="closeLogoutModal()" class="px-6 py-2.5 bg-gray-100 dark:bg-[#333333] text-gray-700 dark:text-gray-300 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-[#3A3A3A] transition-all duration-200 shadow-sm hover:shadow-md">Cancel</button>
                        <button onclick="confirmLogout()" class="px-6 py-2.5 bg-primary hover:bg-primaryDark dark:bg-[#18CB96] dark:hover:bg-[#14a87a] text-white rounded-xl font-medium transition-all duration-200 shadow-md hover:shadow-lg hover:shadow-[#18CB96]/30 hover:-translate-y-0.5 active:translate-y-0 focus:outline-none focus:ring-2 focus:ring-[#18CB96]/50">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
        // File Upload State
        let uploadedFiles = [];
        
        // Profile Dropdown Functions
        const profileDropdownBtn = document.getElementById('profileDropdownBtn');
        const profileDropdown = document.getElementById('profileDropdown');
        
        function closeProfileDropdown() {
            if (profileDropdown) {
                profileDropdown.classList.add('hidden');
            }
            if (profileDropdownBtn) {
                profileDropdownBtn.setAttribute('aria-expanded', 'false');
            }
        }
        
        // Theme Toggle Function
        function toggleTheme() {
            const html = document.documentElement;
            html.classList.toggle('dark');
            const isDark = html.classList.contains('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            const sunIcons = document.querySelectorAll('#sunIconNavbar');
            const moonIcons = document.querySelectorAll('#moonIconNavbar');
            sunIcons.forEach(el => {
                if (el) {
                    el.classList.toggle('hidden', !isDark);
                    el.classList.toggle('block', isDark);
                }
            });
            moonIcons.forEach(el => {
                if (el) {
                    el.classList.toggle('hidden', isDark);
                    el.classList.toggle('block', !isDark);
                }
            });
        }
        
        // Initialize Theme
        const html = document.documentElement;
        const currentTheme = localStorage.getItem('theme') || 'light';
        const isDark = currentTheme === 'dark';
        
        if (isDark) {
            html.classList.add('dark');
        } else {
            html.classList.remove('dark');
        }
        
        document.querySelectorAll('#sunIconNavbar').forEach(el => {
            if (el) {
                el.classList.toggle('hidden', !isDark);
                el.classList.toggle('block', isDark);
            }
        });
        document.querySelectorAll('#moonIconNavbar').forEach(el => {
            if (el) {
                el.classList.toggle('hidden', isDark);
                el.classList.toggle('block', !isDark);
            }
        });
        
        // Theme Toggle Button
        const themeToggleNavbar = document.getElementById('themeToggleNavbar');
        if (themeToggleNavbar) {
            themeToggleNavbar.addEventListener('click', () => toggleTheme());
        }
        
        // Profile Dropdown Toggle
        if (profileDropdownBtn && profileDropdown) {
            profileDropdownBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                profileDropdown.classList.toggle('hidden');
                const isExpanded = !profileDropdown.classList.contains('hidden');
                profileDropdownBtn.setAttribute('aria-expanded', isExpanded);
            });
            
            document.addEventListener('click', (e) => {
                if (!profileDropdown.contains(e.target) && !profileDropdownBtn.contains(e.target)) {
                    closeProfileDropdown();
                }
            });
        }
        
        // Mobile Sidebar Toggle
        function toggleMobileSidebar() {
            const sidebar = document.getElementById('mobileSidebar');
            sidebar.classList.toggle('hidden');
        }
        
        document.addEventListener('click', (e) => {
            const sidebar = document.getElementById('mobileSidebar');
            if (sidebar && !sidebar.contains(e.target) && !e.target.closest('[onclick="toggleMobileSidebar()"]')) {
                sidebar.classList.add('hidden');
            }
        });
        
        // File Upload Functions
        const dropZone = document.getElementById('dropZone');
        const fileInput = document.getElementById('fileInput');
        const uploadedFilesContainer = document.getElementById('uploadedFiles');
        const documentFields = document.getElementById('documentFields');
        const processBtn = document.getElementById('processBtn');
        const previewContent = document.getElementById('previewContent');
        
        // Click to upload
        dropZone.addEventListener('click', () => fileInput.click());
        
        // Drag and drop
        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('border-[#18CB96]', 'bg-[#18CB96]/5');
        });
        
        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('border-[#18CB96]', 'bg-[#18CB96]/5');
        });
        
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-[#18CB96]', 'bg-[#18CB96]/5');
            handleFiles(e.dataTransfer.files);
        });
        
        fileInput.addEventListener('change', (e) => {
            handleFiles(e.target.files);
        });
        
        function handleFiles(files) {
            Array.from(files).forEach(file => {
                if (validateFile(file)) {
                    uploadFile(file);
                }
            });
        }
        
        function validateFile(file) {
            const validTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'text/plain', 'text/csv', 'application/json'];
            const validExtensions = ['.pdf', '.docx', '.txt', '.csv', '.json'];
            const fileExtension = '.' + file.name.split('.').pop().toLowerCase();
            
            if (!validTypes.includes(file.type) && !validExtensions.includes(fileExtension)) {
                alert(`Invalid file type: ${file.name}. Please upload PDF, DOCX, TXT, CSV, or JSON files.`);
                return false;
            }
            
            if (file.size > 50 * 1024 * 1024) { // 50MB limit
                alert(`File too large: ${file.name}. Maximum size is 50MB.`);
                return false;
            }
            
            return true;
        }
        
        function uploadFile(file) {
            const fileId = Date.now() + Math.random();
            uploadedFiles.push({
                id: fileId,
                file: file,
                progress: 0,
                status: 'uploading',
                type: detectDocumentType(file)
            });
            
            renderUploadedFiles();
            simulateUpload(fileId);
        }
        
        function simulateUpload(fileId) {
            const fileObj = uploadedFiles.find(f => f.id === fileId);
            if (!fileObj) return;
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    fileObj.status = 'completed';
                    fileObj.progress = 100;
                    clearInterval(interval);
                    updatePreview(fileObj);
                    showDocumentFields();
                } else {
                    fileObj.progress = Math.round(progress);
                }
                renderUploadedFiles();
            }, 200);
        }
        
        function detectDocumentType(file) {
            const name = file.name.toLowerCase();
            if (name.includes('faq') || name.includes('question')) return 'FAQ';
            if (name.includes('api') || name.includes('postman') || name.includes('endpoint')) return 'API';
            if (name.includes('policy') || name.includes('terms') || name.includes('refund')) return 'Policy';
            if (name.includes('product') || name.includes('catalog')) return 'Product';
            if (name.includes('manual') || name.includes('guide')) return 'Manual';
            if (file.type === 'application/json') return 'API';
            return 'Knowledge Base';
        }
        
        function getFileIcon(file) {
            const extension = file.name.split('.').pop().toLowerCase();
            const icons = {
                pdf: '<svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>',
                docx: '<svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>',
                txt: '<svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>',
                csv: '<svg class="w-5 h-5 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>',
                json: '<svg class="w-5 h-5 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>'
            };
            return icons[extension] || icons.txt;
        }
        
        function renderUploadedFiles() {
            if (uploadedFiles.length === 0) {
                uploadedFilesContainer.innerHTML = '';
                documentFields.classList.add('hidden');
                processBtn.classList.add('hidden');
                return;
            }
            
            uploadedFilesContainer.innerHTML = uploadedFiles.map(fileObj => {
                const statusColor = fileObj.status === 'completed' ? 'text-green-600 dark:text-green-400' : 
                                   fileObj.status === 'error' ? 'text-red-600 dark:text-red-400' : 
                                   'text-blue-600 dark:text-blue-400';
                const statusText = fileObj.status === 'completed' ? 'Validated' : 
                                  fileObj.status === 'error' ? 'Error' : 
                                  'Uploading...';
                
                return `
                    <div class="relative overflow-hidden bg-gradient-to-br from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] rounded-xl border border-primary/20 dark:border-primary/30 p-4 shadow-sm hover:shadow-md transition-all">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0">
                                ${getFileIcon(fileObj.file)}
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <p class="text-sm font-semibold text-gray-900 dark:text-white truncate">${fileObj.file.name}</p>
                                    <button onclick="removeFile(${fileObj.id})" class="text-gray-400 hover:text-red-500 transition-colors">
                                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                        </svg>
                                    </button>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center gap-2 text-xs">
                                        <span class="px-2 py-1 bg-primary/10 dark:bg-primary/20 text-primaryDark dark:text-primary rounded-full font-medium">${fileObj.type}</span>
                                        <span class="${statusColor} font-medium">${statusText}</span>
                                    </div>
                                    ${fileObj.status === 'uploading' ? `
                                        <div class="w-full bg-gray-200 dark:bg-[#2A2A2A] rounded-full h-2">
                                            <div class="bg-[#18CB96] h-2 rounded-full transition-all duration-300" style="width: ${fileObj.progress}%"></div>
                                        </div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400">${fileObj.progress}% uploaded</p>
                                    ` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            if (uploadedFiles.some(f => f.status === 'completed')) {
                documentFields.classList.remove('hidden');
                processBtn.classList.remove('hidden');
            }
        }
        
        function removeFile(fileId) {
            uploadedFiles = uploadedFiles.filter(f => f.id !== fileId);
            renderUploadedFiles();
            if (uploadedFiles.length === 0) {
                previewContent.innerHTML = `
                    <div class="flex flex-col items-center justify-center min-h-[50vh] text-center">
                        <div class="mb-6">
                            <div class="mx-auto w-24 h-24 mb-4 rounded-2xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#2A2A2A] dark:to-[#333333] flex items-center justify-center shadow-inner">
                                <svg class="w-12 h-12 text-gray-400 dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                        </div>
                        <p class="text-base font-medium text-gray-600 dark:text-gray-400">Upload a document to see preview</p>
                    </div>
                `;
            }
        }
        
        function updatePreview(fileObj) {
            const extension = fileObj.file.name.split('.').pop().toLowerCase();
            const fileSize = (fileObj.file.size / 1024 / 1024).toFixed(2);
            const estimatedTokens = Math.round(fileObj.file.size / 4); // Rough estimate
            
            // Get file icon based on extension
            const iconColors = {
                pdf: 'text-red-500',
                docx: 'text-blue-500',
                txt: 'text-gray-500',
                csv: 'text-green-500',
                json: 'text-yellow-500'
            };
            const iconColor = iconColors[extension] || 'text-gray-500';
            
            let previewHTML = '';
            
            // Document Info Card (matching ai-training style)
            previewHTML = `
                <!-- Selected Document Info -->
                <div class="p-4 bg-gradient-to-br from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] rounded-xl border border-primary/20 dark:border-primary/30 shadow-sm">
                    <div class="flex items-center gap-2 mb-2">
                        ${getFileIcon(fileObj.file)}
                        <p class="font-semibold text-gray-900 dark:text-white">${fileObj.file.name}</p>
                    </div>
                    <p class="text-xs text-gray-600 dark:text-gray-400 mb-3">${fileObj.type} document with extracted content ready for processing</p>
                    
                    <div class="space-y-2 text-xs">
                        <div class="flex justify-between">
                            <span class="text-gray-600 dark:text-gray-400">Type:</span>
                            <span class="text-gray-900 dark:text-white font-medium">${extension.toUpperCase()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600 dark:text-gray-400">Size:</span>
                            <span class="text-gray-900 dark:text-white font-medium">${fileSize} MB</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600 dark:text-gray-400">Est. Tokens:</span>
                            <span class="text-gray-900 dark:text-white font-medium">${estimatedTokens.toLocaleString()}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600 dark:text-gray-400">Status:</span>
                            <span class="px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400 rounded-full text-xs font-medium">Validated</span>
                        </div>
                    </div>
                </div>
            `;
            
            if (extension === 'json') {
                previewHTML += `
                    <!-- API Endpoints -->
                    <div>
                        <h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">API Endpoints</h4>
                        <div class="p-3 bg-gradient-to-br from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] rounded-lg border border-primary/20 dark:border-primary/30 shadow-sm">
                            <div class="space-y-2">
                                <div class="flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300">
                                    <span class="px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded font-medium">POST</span>
                                    <span>/api/users</span>
                                </div>
                                <div class="flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300">
                                    <span class="px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded font-medium">GET</span>
                                    <span>/api/products</span>
                                </div>
                                <div class="flex items-center gap-2 text-xs text-gray-700 dark:text-gray-300">
                                    <span class="px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 rounded font-medium">PUT</span>
                                    <span>/api/orders</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Example Responses -->
                    <div>
                        <h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Example Responses</h4>
                        <div class="p-3 bg-gradient-to-br from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] rounded-lg border border-primary/20 dark:border-primary/30 shadow-sm">
                            <pre class="text-xs text-gray-600 dark:text-gray-400 bg-white dark:bg-[#1E1E1E] p-2 rounded overflow-x-auto">{ "status": "success", "data": {...} }</pre>
                        </div>
                    </div>
                `;
            } else {
                previewHTML += `
                    <!-- Extracted Content Preview -->
                    <div>
                        <h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Extracted Content</h4>
                        <div class="p-3 bg-gradient-to-br from-white via-[#F6FFFB] to-[#ECFFF9] dark:from-[#1E1E1E] dark:via-[#1E1E1E] dark:to-[#1E1E1E] rounded-lg border border-primary/20 dark:border-primary/30 max-h-64 overflow-y-auto custom-scrollbar shadow-sm">
                            <p class="text-xs text-gray-700 dark:text-gray-300 leading-relaxed">
                                Document content extracted successfully. Text processing and chunking will occur during the processing phase. The system will analyze the document structure and extract relevant information for AI training purposes. This includes identifying key sections, extracting metadata, and preparing the content for vector embedding generation.
                            </p>
                        </div>
                    </div>
                    
                    <!-- Detected Fields -->
                    <div>
                        <h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Detected Fields</h4>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded text-xs">Title</span>
                            <span class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded text-xs">Content</span>
                            <span class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400 rounded text-xs">Metadata</span>
                        </div>
                    </div>
                `;
            }
            
            previewContent.innerHTML = previewHTML;
        }
        
        function showDocumentFields() {
            const firstFile = uploadedFiles.find(f => f.status === 'completed');
            if (firstFile) {
                document.getElementById('docTitle').value = firstFile.file.name.replace(/\.[^/.]+$/, '');
                const category = firstFile.type.toLowerCase();
                if (['faq', 'api', 'policy', 'product', 'manual'].includes(category)) {
                    document.getElementById('docCategory').value = category;
                }
            }
        }
        
        function processDocuments() {
            const title = document.getElementById('docTitle').value;
            const category = document.getElementById('docCategory').value;
            const description = document.getElementById('docDescription').value;
            const tags = document.getElementById('docTags').value;
            
            if (!title || !category) {
                alert('Please fill in Document Title and Category');
                return;
            }
            
            // Simulate processing
            processBtn.disabled = true;
            processBtn.textContent = 'Processing...';
            
            setTimeout(() => {
                alert('Document processed successfully! Redirecting to documents page...');
                window.location.href = 'documents.html?success=Document processed successfully';
            }, 2000);
        }
        
        // Logout Modal Functions
        function openLogoutModal() {
            const modal = document.getElementById('logoutModal');
            if (modal) {
                modal.classList.remove('hidden');
                closeProfileDropdown();
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeLogoutModal() {
            const modal = document.getElementById('logoutModal');
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = '';
            }
        }
        
        function confirmLogout() {
            closeLogoutModal();
            window.location.href = 'login.html';
        }
        
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const modal = document.getElementById('logoutModal');
                if (modal && !modal.classList.contains('hidden')) {
                    closeLogoutModal();
                }
            }
        });
    </script>
</body>
</html>

